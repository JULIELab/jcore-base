language: java
env:
  global:
  - secure: hnrLLELr3qRRVTVYEvB2/MUudmWX+we8ojMAMkKp1ZnKap42YaUfNtdIBywvLACrJwx+r3zxpgpneej5orU5JBKpylgpm8aA1Jv+FmbiHCL9KdRKNcg8UWsgqdMPqvTXV/8G+8Amk2YAKxS0QSfxwQmaM6g5UleqqwjRPKQDMWtz0PzTPRUYtlXGLUVNHlntU7gtAQFCurHUIklL5pGT3NFviH0IWOnC1W/E+S64OlhdUcBULFdxLazUfi6IGuX5N5qpL4FCjoFZOIFLpB3bXY6yi2sDQQH1OxaucoMYBVxlBMRQ06Z0MPZvPcNq4uy+0dPnHXan9btqnhDULF9poJARbFytNHq8b9Yz0fV5FkyZZOOx6Av2a6WHYRPOtOS6u6hZYJL+vUrhXeQA8Qx4HgvhiA/P2nBYPdNgF3SXs3OdT34yvZmIXdtUOjO2BJ0FKN1F0jIb9S6MDo0NNyeIVnqIHKmYXpo2lTk/IdKp+SKsj2pdvz3Rkpw6veC4Dz3EIUGXVH3OrmqzhHctARraifXgDwcZTuPVtrYZwA0viXwch1nHvrpKBBS5mIKZ4DzEZgk6XS5mIWvALELYYFr1KLa6DUBRg8PkPoigAO3x6MocehZy8qyxLt3bItAGP9SNXlssKO5cvLz5PDqwDx9rxlqYvt6z8FK3LKcCt7lFXCg=
  - # SONATYPE_USERNAME
  - secure: ATBiHXF5fi+hVQjsNCItWeVLgJedVmGLVxBWoYSV5dfzVfhF9Ub8OkVMIt1bQLO/bE/7476ErRga8DONhxsnZAYgXlbBHToSmzEw5kiQiknUQoGV2MYUW03qRotrCjyEDDyyfrbeAsf7Ov5JyijeMSJ83OsJBVACv5WI3gsKsMh43SXXW7VhA0dVBOMAtwUhLgnFVuwmPOjuVsIv7Xn+eKOSSCLsr6UmjCH0l23Bs5Dm+kW+EayjNBVlpHkONVTPgiP35oK1MGiHED1HM04civbiUI8N7X3QminKfCxA/+HtlerYfYFdzepWirhFneekwGwqaKXxpvsfbpaUrhBpBLbQml07qXZFyw9f90pNtM5/PPT6cLmdSKGQs2zb8rSB0XWnJ5CxhrVsSkG3TOeF2YUTP0m1FYi1aqUsBf8uvNKeeUarZHIO0gR7/Qfo5GO76OYjC3p8dfe77v1Nh7DFqmLa1iW9GWQsXqrefivRGGqJwjkzFy1zeyyD2uwxJGjZSfnBsMeJ2WYqjgClRre83G7DNxFk8RTgAO5GGqJsPtbvzAG7nf2khmMQ3RrCp5fyEvKhqIDKFg0wbDF+5nTO7G9r0czz38gf0dUL6/IKOXrTzMqCus+Yj6qNYRo/RJxq9WpBHgNAGLZHRSYiNUxnQ4MwbvPLrC82bXslQRUBfDs=
  - # SONATYPE_PASSWORD
  - secure: N2ZhlO6mt5ZQ1bh5eQhcPoP8IUYi50XSO8W0WmylC3HA5GNYeBlUtJKN8xpc0g7pCViMHU1wHNQLhgo0N9XEAERpY+udYRsBgu2B1/1owh0ve0a8E1DkhSE5ysp3VFjrAPzzQxRFpYRIiaRErbnPqPYFKyI+1lI6fy6MDbSUQsQzrXWe0jAH+s36v36cFvckOGaWe/vVkmZm+AH0rReO+ZT9/3fAereIcwhP+gUz+hjHf0fLTiTV0917rYI+fZgyVDBs7Z3JxIJbPenKSMTHrLCvQWDx39q3CuwvAMVMbBDYKJmn1JNGc6ofKypuHkMmzDFzmUyhse2yj2eqBsWRUc7fQUsdR//B8wgfGyHnEgZcLkh+oj+bFoww2asFZMDe7FGFyddPgCH8ky9ASg9mMHfHMzowjOaSojG2eATqwupYg+2fAGPty4Z7i6up819QvELoI+0G80trmScOjyfpqXaC4iCL+wGSGM4y7b6HS4mwHZx9B55KGEJHExKbFB1bglw+TI5NOgvUf1FkhMpoSqTa8n0gthNDE5yVC2Qvcr6AmhUZFoTSIfv/fMA6M6FfMGoKq56DlZfrDEgNjdq6ZW8SMZ/qjJe7EAbDLRkiBctXoc0hwsWoShu+MQL3AY7KITYUlAYYom3UZcsHrNkfTuffFlfumLGGcDMu+YUGF2w=
  - # GPG_KEY_NAME
  - secure: pxYxmA/9xS/9DO6rUAhlbAtYQMmG633jSwG8OIVCnnoQSXS4UILJgNl7Q6dQsAuT27tk+/fin0kXTnxWqCe0URb3c3XgNQwfGAuz1JIYVPHvezoDQLLRQA6LRgqd7GuvBDsyXJvBANozGKJYJVfoeT9gqFosFuMdRZ88eQm+ltX7zVKyMiz2rqKYPoSFInNxDGMOaIQ+RZdf8ai8rLY3E11PxsMC0LgypEDbuC7d9Q+Tu89YfUeuRly0hAuxmW++RrMgeeAs/7BndmZqcHVpkrcX6Drq8nZ2cj0ev4IDJelV/Nd17Vjfg7HgfJ4/d9S+PCg4KhvOY/y9Xad8geIIzXLFD9ZgcaK7MT9+BFGYXj7ExizFSc+Ico5Q822RJA1XZWfc/EgnY+7jEZCCMz/ceHx8oSh0ce1VbPl7c+O+jMXUMQC69Gpys57XC48rdPn0bbjc4/jpSOq46Xv7YdcGuA2BcWEEeQ0WAbi9IDcevpCXiZ7kng5hHTCpfaYVhn63KAIAMKf7tu6C78wFZR63F8Gf4x/jKE37QqvHV3uOzD7ar6nTAuy/ukZK0p4zyeIYe25PnS9K4kpolT1I12i7/l/7MO9NPFdB0aOCBHUNPBEkifwceltX6RP4PDIKdtCEQ4vcqrRNvhtAhO9Vo1udkyaeFx5swbY3j11CjzcfrBE=
  - # GPG_PASSPHRASE

install: mvn install -DskipTests=true -Dmaven.javadoc.skip=true -B -V
script: mvn test -B

cache:
  directories:
    - $HOME/.m2/repository

before_deploy: ./travis-deployment/before-deploy.sh
deploy:
  provider: script
  script: ./travis-deployment/deploy.sh
  # We need the built artifacts to create their checksums and check if they are already deployed
  skip_cleanup: true
  on:
    all_branches: true
    condition: $TRAVIS_BRANCH =~ ^2.3.0-SNAPSHOT|master$